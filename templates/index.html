<!DOCTYPE html>
<html>
<head>
    <title>AWOKAOWKAOWK</title>
    <style>
        .corner {
            border-radius: 25px;
            border: 5px solid #212aad;
            padding: 0px;
            width:60%;
            height:auto;
            text-align: center;
        }

        .video-container {
            justify-content: center;
            text-align: center;
            height:100%;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="row" style="text-align: center; width:100%;">
            <img src="../static/pytorch.png" style="width:40px; position:relative; left: -10px; display:inline-block;">
            <h1 style="text-align: center; display:inline-block;">Data dan Inference</h1>
        </div>
    </div>

    

    <div class="video-container">
        <div class="corner">
            <img src="{{ url_for('video') }}"></img>
        </div>
    </div>
    

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


    <h1>Screenshot:</h1>
    <h2>Image with X:</h2>
    <img id="latest-image-x" src="" alt="Latest Image X">

    <h2>Image with Y:</h2>
    <img id="latest-image-y" src="" alt="Latest Image Y">

    <h2>Image with Z:</h2>
    <img id="latest-image-z" src="" alt="Latest Image Z">


    <h1>Data Terbaru</h1>

    <p id="myValue">{{ value }}</p>
    <button id="resetButton" onclick="resetValue()" style="display: none;">Reset</button>

    <ul>
        <li id="ref_box_X"> ref_box_X:</li>
        <li id="act_box_X"> actual_box_X:</li>
        <li id="stat_box_X"> statuS_box_X:</li>
    </ul>
    <ul>
        <li id="ref_box_Y"> ref_box_Y:</li>
        <li id="act_box_Y"> actual_box_Y:</li>
        <li id="stat_box_Y"> statuS_box_Y:</li>
    </ul>
    <ul>
        <li id="ref_box_Z"> ref_box_Z:</li>
        <li id="act_box_Z"> actual_box_Z:</li>
        <li id="stat_box_Z"> statuS_box_Z:</li>
    </ul>
    <h3 id="stat_final">status_final:</h3>
    <ul>

        

    <h3 id="camera">Camera:</h3>
    <h3 id="data_2">Data2:</h3>
    <ul>
        <li id="sequence">Sequence:</li>
        <li id="nomor_body">Nomor Body:</li>
        <li id="vin_no">Vin_no:</li>
        <li id="car">Car:</li>
        <li id="steer">Steer:</li>
        <li id="suffix">Suffix:</li>
        <li id="Kode_relay">Kode Relay:</li>
        <li id="Box_X">Box X:</li>
        <li id="Box_Y">Box Y:</li>
        <li id="Box_Z">Box Z:</li>
    </ul>


        <li id="sequence2">Seq:</li>
    </ul>
    <ul>
        <li id="car2">Car:</li>
    </ul>
    <ul>
        <li id ="steer2">Steer:</li>
    </ul>

    <ul>
        <li id = "box_X2">Box_X:</li>
    </ul>
    <ul>
        <li id = "box_Y2">Box_Y:</li>
    </ul>
    <ul>
        <li id = "box_Z2">Box_Z:</li>
    </ul>




    <script>

        function updateLatestImages() {
            $.ajax({
                url: '/latest_images',
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    if (data.display_images.x) {
                        $('#latest-image-x').attr('src', '/uploads/' + data.image_x);
                    } else {
                        $('#latest-image-x').attr('src', '/uploads/menunggu.jpeg');
                    }
                    if (data.display_images.y) {
                        $('#latest-image-y').attr('src', '/uploads/' + data.image_y);
                    } else {
                        $('#latest-image-y').attr('src', '/uploads/menunggu.jpeg');
                    }
                    if (data.display_images.z) {
                        $('#latest-image-z').attr('src', '/uploads/' + data.image_z);
                    } else {
                        $('#latest-image-z').attr('src', '/uploads/menunggu.jpeg');
                    }
                },
                complete: function () {
                    setTimeout(updateLatestImages, 1000);  // Memperbarui setiap 1 detik
                }
            });
        }

        $(document).ready(function () {
            updateLatestImages();

            $('#reset-button').click(function () {
                $.ajax({
                    url: '/reset_images',
                    type: 'GET',
                    dataType: 'json',
                    success: function (data) {
                        if (data.success) {
                            $('#latest-image-x').attr('src', '/uploads/menunggu.jpeg');
                            $('#latest-image-y').attr('src', '/uploads/menunggu.jpeg');
                            $('#latest-image-z').attr('src', '/uploads/menunggu.jpeg');
                        }
                    }
                });
            });
        });



        document.addEventListener('DOMContentLoaded', function() {
            updateValue();

            // Mengatur interval pembaruan nilai setiap 1 detik
            setInterval(updateValue, 1000);
        });

        function updateValue() {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', '/get_value', true);
            xhr.onload = function() {
                if (xhr.status === 200) {
                    var element = document.getElementById("myValue");
                    element.innerHTML = xhr.responseText;

                    var resetButton = document.getElementById("resetButton");
                    resetButton.style.display = (parseInt(xhr.responseText) === 2) ? 'block' : 'none';
                }
            };
            xhr.send();
        }

    

        function resetValue() {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', '/reset', true);
            xhr.onload = function() {
                if (xhr.status === 200) {
                    var element = document.getElementById("myValue");
                    element.innerHTML = '0';

                    var resetButton = document.getElementById("resetButton");
                    resetButton.style.display = 'none';
                }
            };
            xhr.send();
        }

        function fetchData() {
            fetch('/get_data')
                .then(response => response.json())
                .then(data => {
                    if (data) {
                        document.getElementById('sequence').innerText = "Sequence: " + data.sequence;
                        document.getElementById('nomor_body').innerText = "Nomor Body: " + data.nomor_body;
                        document.getElementById('vin_no').innerText = "Vin_no: " + data.vin_no;
                        document.getElementById('car').innerText = "Car: " + data.car;
                        document.getElementById('steer').innerText = "Steer: " + data.steer;
                        document.getElementById('suffix').innerText = "Suffix: " + data.suffix;
                        document.getElementById('Kode_relay').innerText = "Kode Relay: " + data.Kode_relay;
                        document.getElementById('Box_X').innerText = "Box X: " + data.Box_X;
                        document.getElementById('Box_Y').innerText = "Box Y: " + data.Box_Y;
                        document.getElementById('Box_Z').innerText = "Box Z: " + data.Box_Z;
                    } else {
                        document.getElementById('sequence').innerText = "Tidak ada data.";
                        document.getElementById('nomor_body').innerText = "";
                        document.getElementById('vin_no').innerText = "";
                        document.getElementById('car').innerText = "";
                        document.getElementById('steer').innerText = "";
                        document.getElementById('suffix').innerText = "";
                        document.getElementById('Kode_relay').innerText = "";
                        document.getElementById('Box_X').innerText = "";
                        document.getElementById('Box_Y').innerText = "";
                        document.getElementById('Box_Z').innerText = "";
                    }
                });
        }

        setInterval(fetchData, 1000);
        
    </script>
    <script>
      function fetchData2(){
          fetch('/get_sequence')
          .then(response => response.json())
          .then(data =>{
            if(data){
              document.getElementById('sequence2').innerText = "Sequence2: " + data.sequence2
            }
            else{
              document.getElementById('sequence2').innerText = "heheh"
            }
          })
        }

        setInterval(fetchData2, 1000)
    </script>

    <script>
        function fetchData3(){
            fetch('/get_car')
            .then(response => response.json())
            .then(data =>{
            if(data){
                document.getElementById('car2').innerText = "Car2: " + data.car2
            }
            else{
                document.getElementById('car2').innerText = "heheh"
            }
            })
        }

        setInterval(fetchData3, 1000)
    </script>

    <script>
        function fetchData4(){
            fetch('/get_camera')
            .then(response => response.json())
            .then(data =>{
            if(data){
                document.getElementById('camera').innerText = "Cam: " + data.camera
            }
            else{
                document.getElementById('camera').innerText = "heheh"
            }
            })
        }

        setInterval(fetchData4, 1000)
    </script>

    <script>
        function fetchData5(){
            fetch('/get_steer')
            .then(response => response.json())
            .then(data =>{
            if(data){
                document.getElementById('steer2').innerText = "Steer: " + data.steer2
            }
            else{
                document.getElementById('steer2').innerText = "heheh"
            }
            })
        }

        setInterval(fetchData5, 1000)
    </script>

    <script>
        function fetchData6(){
            fetch('/get_box_X')
            .then(response => response.json())
            .then(data =>{
            if(data){
                document.getElementById('box_X2').innerText = "Box_X: " + data.box_X2
            }
            else{
                document.getElementById('box_X2').innerText = "heheh"
            }
            })
        }

        setInterval(fetchData6, 1000)
    </script>

    <script>
        function fetchData7(){
            fetch('/get_box_Y')
            .then(response => response.json())
            .then(data =>{
            if(data){
                document.getElementById('box_Y2').innerText = "Box_Y: " + data.box_Y2
            }
            else{
                document.getElementById('box_Y2').innerText = "heheh"
            }
            })
        }

        setInterval(fetchData7, 1000)
    </script>

    <script>
        function fetchData8(){
            fetch('/get_box_Z')
            .then(response => response.json())
            .then(data =>{
            if(data){
                document.getElementById('box_Z2').innerText = "Box_Z: " + data.box_Z2
            }
            else{
                document.getElementById('box_Z2').innerText = "heheh"
            }
            })
        }

        setInterval(fetchData8, 1000)
    </script>

    <script>
        function fetch_reference_box_X(){
            fetch('/get_reference_box_X')
            .then(response => response.json())
            .then(data =>{
                if(data){
                    document.getElementById('ref_box_X').textContent = "REFERENSI BOX X : " + data.ref_box_X
                }
                else{
                    document.getElementById('ref_box_X').innerText = "Menunggu"
                }
            })
        }
        setInterval(fetch_reference_box_X, 1000);
    </script>    

    <script>
        function fetch_actual_box_X(){
            fetch('/get_actual_box_X')
            .then(response => response.json())
            .then(data =>{
                if(data){
                    document.getElementById('act_box_X').textContent = "ACTUAL BOX X : " + data.act_box_X
                }
                else{
                    document.getElementById('act_box_X').innerText = "Menunggu"
                }
            })
        }
        setInterval(fetch_actual_box_X, 1000);
    </script>

    <script>
        function fetch_status_box_X(){
            fetch('/get_status_box_X')
            .then(response => response.json())
            .then(data =>{
                if(data){
                    document.getElementById('stat_box_X').textContent = "STATUS BOX X : " + data.stat_box_X
                }
                else{
                    document.getElementById('stat_box_X').innerText = "Menunggu"
                }
            })
        }
        setInterval(fetch_status_box_X, 1000);
    </script>



    <script>
        function fetch_reference_box_Y(){
            fetch('/get_reference_box_Y')
            .then(response => response.json())
            .then(data =>{
                if(data){
                    document.getElementById('ref_box_Y').textContent = "REFERENSI BOX Y : " + data.ref_box_Y
                }
                else{
                    document.getElementById('ref_box_Y').innerText = "Menunggu"
                }
            })
        }
        setInterval(fetch_reference_box_Y, 1000);
    </script>    

    <script>
        function fetch_actual_box_Y(){
            fetch('/get_actual_box_Y')
            .then(response => response.json())
            .then(data =>{
                if(data){
                    document.getElementById('act_box_Y').textContent = "ACTUAL BOX Y : " + data.act_box_Y
                }
                else{
                    document.getElementById('act_box_Y').innerText = "Menunggu"
                }
            })
        }
        setInterval(fetch_actual_box_Y, 1000);
    </script>

    <script>
        function fetch_status_box_Y(){
            fetch('/get_status_box_Y')
            .then(response => response.json())
            .then(data =>{
                if(data){
                    document.getElementById('stat_box_Y').textContent = "STATUS BOX Y : " + data.stat_box_Y
                }
                else{
                    document.getElementById('stat_box_Y').innerText = "Menunggu"
                }
            })
        }
        setInterval(fetch_status_box_Y, 1000);
    </script>


    <script>
        function fetch_reference_box_Z(){
            fetch('/get_reference_box_Z')
            .then(response => response.json())
            .then(data =>{
                if(data){
                    document.getElementById('ref_box_Z').textContent = "REFERENSI BOX Z : " + data.ref_box_Z
                }
                else{
                    document.getElementById('ref_box_Z').innerText = "Menunggu"
                }
            })
        }
        setInterval(fetch_reference_box_Z, 1000);
    </script>    

    <script>
        function fetch_actual_box_Z(){
            fetch('/get_actual_box_Z')
            .then(response => response.json())
            .then(data =>{
                if(data){
                    document.getElementById('act_box_Z').textContent = "ACTUAL BOX Z : " + data.act_box_Z
                }
                else{
                    document.getElementById('act_box_Z').innerText = "Menunggu"
                }
            })
        }
        setInterval(fetch_actual_box_Z, 1000);
    </script>

    <script>
        function fetch_status_box_Z(){
            fetch('/get_status_box_Z')
            .then(response => response.json())
            .then(data =>{
                if(data){
                    document.getElementById('stat_box_Z').textContent = "STATUS BOX Z : " + data.stat_box_Z
                }
                else{
                    document.getElementById('stat_box_Z').innerText = "Menunggu"
                }
            })
        }
        setInterval(fetch_status_box_Z, 1000);
    </script>

    <script>
        function fetch_status_final(){
            fetch('/get_status_final')
            .then(response => response.json())
            .then(data =>{
                if(data){
                    document.getElementById('stat_final').textContent = "STATUS FINAL : " + data.stat_final
                }
                else{
                    document.getElementById('stat_final').innerText = "Menunggu"
                }
            })
        }
        setInterval(fetch_status_final, 1000);
    </script>


</body>
</html>
